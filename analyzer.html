<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì†Œì´í™ˆ ëŒ€ë³¸ ë¶„ì„ê¸°</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f7;
        }
        
        .container {
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #1d1d1f;
            margin-bottom: 30px;
        }
        
        textarea {
            width: 100%;
            height: 200px;
            padding: 16px;
            border: 2px solid #e5e5e7;
            border-radius: 8px;
            font-size: 16px;
            margin-bottom: 20px;
            resize: vertical;
        }
        
        button {
            background: #007AFF;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-bottom: 30px;
        }
        
        button:hover {
            background: #0056b3;
        }
        
        .result {
            background: #f5f5f7;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }
        
        .score {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .score-item {
            background: white;
            padding: 16px;
            border-radius: 8px;
            text-align: center;
            min-width: 80px;
        }
        
        .score-number {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 4px;
        }
        
        .score-label {
            font-size: 12px;
            color: #666;
        }
        
        .analysis {
            background: white;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 16px;
        }
        
        .phase {
            margin-bottom: 12px;
        }
        
        .phase-title {
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .hook { color: #007AFF; }
        .problem { color: #FF3B30; }
        .solution { color: #34C759; }
        .cta { color: #FF9500; }
        
        .suggestions {
            background: white;
            padding: 16px;
            border-radius: 8px;
        }
        
        .suggestion {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }
        
        .suggestion::before {
            content: "ğŸ’¡";
            position: absolute;
            left: 0;
        }
        
        .type-recommendation {
            background: linear-gradient(135deg, #007AFF, #5856D6);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        
        .type-recommendation h3 {
            margin-bottom: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¤– ì†Œì´í™ˆ ëŒ€ë³¸ ë¶„ì„ê¸°</h1>
        
        <textarea id="scriptText" placeholder="ë¶„ì„í•  ëŒ€ë³¸ì„ ì…ë ¥í•˜ì„¸ìš”...

ì˜ˆì‹œ:
ìš”ì¦˜ í•´ì™¸ì—ì„œ ì´ê±° ì™„ì „ í•«í•´ìš”.
ê¸°ì¡´ ì œí’ˆì€ ë¶ˆí¸í•œë° ì´ ì œí’ˆì€ ë‹¤ë¥´ë”ë¼ê³ ìš”.
ê¸°ëŠ¥ë„ ëŒ€ë°•ì´ê³  ê°€ì„±ë¹„ë„ ì¢‹ì•„ìš”.
ëŒ“ê¸€ì— 'ì™€!' ì ì–´ì£¼ì„¸ìš” DM ë³´ë‚´ë“œë¦´ê²Œìš”."></textarea>
        
        <button onclick="analyze()">ë¶„ì„í•˜ê¸°</button>
        
        <div id="result" class="result">
            <div id="typeRecommendation" class="type-recommendation"></div>
            <div id="scores" class="score"></div>
            <div id="analysis" class="analysis"></div>
            <div id="suggestions" class="suggestions"></div>
        </div>
    </div>

    <script>
        function analyze() {
            const text = document.getElementById('scriptText').value.trim();
            
            if (!text) {
                alert('ëŒ€ë³¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            console.log('ë¶„ì„ ì‹œì‘:', text);
            
            // ë¬¸ì¥ ë¶„ë¦¬
            const sentences = text.split(/[.!?ã€‚ï¼ï¼Ÿ]/).filter(s => s.trim().length > 0);
            console.log('ë¬¸ì¥ë“¤:', sentences);
            
            if (sentences.length === 0) {
                alert('ë¬¸ì¥ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');
                return;
            }
            
            // ì œí’ˆ íƒ€ì… íŒë‹¨
            const productType = determineProductType(text);
            
            // ê¸°ìŠ¹ì „ê²° ë¶„ë¥˜
            const classified = classifySentences(sentences, productType);
            console.log('ë¶„ë¥˜ ê²°ê³¼:', classified);
            
            // ì ìˆ˜ ê³„ì‚°
            const scores = calculateScores(classified, productType);
            console.log('ì ìˆ˜:', scores);
            
            // ê²°ê³¼ í‘œì‹œ
            displayResults(classified, scores, sentences.length, productType);
        }
        
        function determineProductType(text) {
            const functionalKeywords = ['ê³ ë¯¼', 'ë¬¸ì œ', 'ë¶ˆí¸', 'í•´ê²°', 'ê¸°ëŠ¥', 'í¸ë¦¬', 'ê°€ì„±ë¹„', 'ê³µê°„', 'ìˆ˜ë‚©', 'í™œìš©'];
            const designKeywords = ['ì˜ˆìœ', 'ì´ìœ', 'ë””ìì¸', 'ê°ì„±', 'ëŠë‚Œ', 'ë¶„ìœ„ê¸°', 'ìŠ¤íƒ€ì¼', 'ë´¤ì§€ë§Œ', 'ì²˜ìŒë´ìš”'];
            
            let functionalScore = 0;
            let designScore = 0;
            
            functionalKeywords.forEach(keyword => {
                if (text.includes(keyword)) functionalScore++;
            });
            
            designKeywords.forEach(keyword => {
                if (text.includes(keyword)) designScore++;
            });
            
            return designScore > functionalScore ? 'design' : 'functional';
        }
        
        function classifySentences(sentences, productType) {
            const result = {
                hook: [],
                problem: [],
                solution: [],
                cta: []
            };
            
            sentences.forEach((sentence, index) => {
                const s = sentence.trim();
                
                // CTA ë¨¼ì € í™•ì¸ (ê°€ì¥ ëª…í™•í•¨)
                if (s.includes('ëŒ“ê¸€') || s.includes('DM') || s.includes('ë§í¬')) {
                    result.cta.push({ text: s, index: index + 1 });
                }
                // í›… íŒ¨í„´ í™•ì¸
                else if ((index === 0) || s.includes('í•´ì™¸ì—ì„œ') || s.includes('ì™„ì „') || s.includes('í•«') || s.includes('ë¯¸ì³¤') || s.includes('ìš°ì™€') || s.includes('ì™€') || s.includes('ì²˜ìŒë´ìš”') || s.includes('ìˆ˜ë§ì€')) {
                    result.hook.push({ text: s, index: index + 1 });
                }
                // ì œí’ˆ íƒ€ì…ë³„ ë¬¸ì œ/í•´ê²° íŒ¨í„´
                else if (productType === 'design') {
                    // ë””ìì¸ ì¤‘ì‹¬ ì œí’ˆì€ ë¬¸ì œ ì œê¸°ë³´ë‹¤ ë””ìì¸ ì„¤ëª…
                    if (s.includes('ì¼€ì´ìŠ¤') || s.includes('ëª¨ë˜') || s.includes('ë¹›') || s.includes('ì´ë»') || s.includes('ì˜ˆë»') || s.includes('ë””ìì¸')) {
                        result.problem.push({ text: s, index: index + 1 });
                    } else {
                        result.solution.push({ text: s, index: index + 1 });
                    }
                } else {
                    // ê¸°ëŠ¥ ì¤‘ì‹¬ ì œí’ˆ
                    if (s.includes('ë¬¸ì œ') || s.includes('ë¶ˆí¸') || s.includes('ê³ ë¯¼') || s.includes('ê·¼ë°') || s.includes('ì¸ë°') || s.includes('ë¶€ë‹´')) {
                        result.problem.push({ text: s, index: index + 1 });
                    } else {
                        result.solution.push({ text: s, index: index + 1 });
                    }
                }
            });
            
            return result;
        }
        
        function calculateScores(classified, productType) {
            const counts = {
                hook: classified.hook.length,
                problem: classified.problem.length,
                solution: classified.solution.length,
                cta: classified.cta.length
            };
            
            const scores = {};
            
            if (productType === 'design') {
                // ë””ìì¸ ì¤‘ì‹¬ ì œí’ˆì€ ìŠ¹(æ‰¿) ë¶€ë¶„ì´ ë””ìì¸ ì„¤ëª…ì´ë¯€ë¡œ ë” ì¤‘ìš”
                scores.hook = counts.hook >= 1 && counts.hook <= 2 ? 100 : (counts.hook === 0 ? 0 : 70);
                scores.problem = counts.problem >= 2 && counts.problem <= 4 ? 100 : (counts.problem < 2 ? 60 : 70);
                scores.solution = counts.solution >= 1 && counts.solution <= 3 ? 100 : (counts.solution === 0 ? 50 : 70);
                scores.cta = counts.cta === 1 ? 100 : (counts.cta === 0 ? 0 : 80);
            } else {
                // ê¸°ëŠ¥ ì¤‘ì‹¬ ì œí’ˆ
                scores.hook = counts.hook >= 1 && counts.hook <= 2 ? 100 : (counts.hook === 0 ? 0 : 70);
                scores.problem = counts.problem >= 1 && counts.problem <= 3 ? 100 : (counts.problem === 0 ? 0 : 70);
                scores.solution = counts.solution >= 2 && counts.solution <= 5 ? 100 : (counts.solution < 2 ? 50 : 70);
                scores.cta = counts.cta === 1 ? 100 : (counts.cta === 0 ? 0 : 80);
            }
            
            scores.overall = Math.round((scores.hook + scores.problem + scores.solution + scores.cta) / 4);
            
            return scores;
        }
        
        function displayResults(classified, scores, totalSentences, productType) {
            // ì œí’ˆ íƒ€ì… ì¶”ì²œ
            const typeDiv = document.getElementById('typeRecommendation');
            if (productType === 'design') {
                typeDiv.innerHTML = '<h3>ğŸ¨ Bíƒ€ì…: ë””ìì¸/ê°ì„± ì¤‘ì‹¬ ì œí’ˆ</h3><p>ì‹¬ë¯¸ì„±ê³¼ ê°ì„±ì„ ì¤‘ì‹œí•˜ëŠ” ê³ ê°ì„ íƒ€ê²Ÿìœ¼ë¡œ í•˜ëŠ” ì œí’ˆìœ¼ë¡œ ë¶„ì„ë©ë‹ˆë‹¤.</p>';
                typeDiv.style.background = 'linear-gradient(135deg, #FF3B30, #FF9500)';
            } else {
                typeDiv.innerHTML = '<h3>ğŸ”§ Aíƒ€ì…: ê¸°ëŠ¥/ë¬¸ì œí•´ê²° ì¤‘ì‹¬ ì œí’ˆ</h3><p>ì‹¤ìš©ì„±ê³¼ ë¬¸ì œí•´ê²°ì„ ì¤‘ì‹œí•˜ëŠ” ê³ ê°ì„ íƒ€ê²Ÿìœ¼ë¡œ í•˜ëŠ” ì œí’ˆìœ¼ë¡œ ë¶„ì„ë©ë‹ˆë‹¤.</p>';
                typeDiv.style.background = 'linear-gradient(135deg, #007AFF, #5856D6)';
            }
            
            // ì ìˆ˜ í‘œì‹œ
            const scoresDiv = document.getElementById('scores');
            scoresDiv.innerHTML = `
                <div class="score-item">
                    <div class="score-number" style="color: ${scores.overall >= 80 ? '#34C759' : scores.overall >= 60 ? '#FF9500' : '#FF3B30'}">${scores.overall}</div>
                    <div class="score-label">ì¢…í•©</div>
                </div>
                <div class="score-item">
                    <div class="score-number hook">${scores.hook}</div>
                    <div class="score-label">ê¸°(èµ·) ${classified.hook.length}ê°œ</div>
                </div>
                <div class="score-item">
                    <div class="score-number problem">${scores.problem}</div>
                    <div class="score-label">ìŠ¹(æ‰¿) ${classified.problem.length}ê°œ</div>
                </div>
                <div class="score-item">
                    <div class="score-number solution">${scores.solution}</div>
                    <div class="score-label">ì „(è½‰) ${classified.solution.length}ê°œ</div>
                </div>
                <div class="score-item">
                    <div class="score-number cta">${scores.cta}</div>
                    <div class="score-label">ê²°(çµ) ${classified.cta.length}ê°œ</div>
                </div>
            `;
            
            // ë¬¸ì¥ë³„ ë¶„ì„ í‘œì‹œ
            const analysisDiv = document.getElementById('analysis');
            let analysisHTML = `<h3>ğŸ“ ë¬¸ì¥ë³„ ë¶„ì„ (ì´ ${totalSentences}ë¬¸ì¥)</h3>`;
            
            const phases = [
                { key: 'hook', name: productType === 'design' ? 'ê¸°(èµ·) - ì‹œê°ì  ì„íŒ©íŠ¸' : 'ê¸°(èµ·) - ë¬¸ì œ ìƒí™© ì œì‹œ', class: 'hook' },
                { key: 'problem', name: productType === 'design' ? 'ìŠ¹(æ‰¿) - ë””ìì¸ ë§¤ë ¥' : 'ìŠ¹(æ‰¿) - ê³µê°ëŒ€ í˜•ì„±', class: 'problem' },
                { key: 'solution', name: productType === 'design' ? 'ì „(è½‰) - ê¸°ëŠ¥ ë³´ë„ˆìŠ¤' : 'ì „(è½‰) - ê¸°ëŠ¥ ì¤‘ì‹¬ í•´ê²°ì±…', class: 'solution' },
                { key: 'cta', name: productType === 'design' ? 'ê²°(çµ) - í¬ì†Œì„± êµ¬ë§¤ ìœ ë„' : 'ê²°(çµ) - í–‰ë™ ìœ ë„', class: 'cta' }
            ];
            
            phases.forEach(phase => {
                if (classified[phase.key].length > 0) {
                    analysisHTML += `<div class="phase">`;
                    analysisHTML += `<div class="phase-title ${phase.class}">${phase.name}</div>`;
                    classified[phase.key].forEach(sentence => {
                        analysisHTML += `<div>${sentence.index}. ${sentence.text}</div>`;
                    });
                    analysisHTML += `</div>`;
                }
            });
            
            analysisDiv.innerHTML = analysisHTML;
            
            // ê°œì„  ì œì•ˆ
            const suggestionsDiv = document.getElementById('suggestions');
            const suggestions = generateSuggestions(classified, totalSentences, productType);
            
            let suggestionsHTML = '<h3>ğŸ’¡ ê°œì„  ì œì•ˆ</h3>';
            suggestions.forEach(suggestion => {
                suggestionsHTML += `<div class="suggestion">${suggestion}</div>`;
            });
            
            suggestionsDiv.innerHTML = suggestionsHTML;
            
            // ê²°ê³¼ í‘œì‹œ
            document.getElementById('result').style.display = 'block';
            document.getElementById('result').scrollIntoView({ behavior: 'smooth' });
        }
        
        function generateSuggestions(classified, total, productType) {
            const suggestions = [];
            
            if (productType === 'design') {
                // ë””ìì¸ ì¤‘ì‹¬ ì œí’ˆ ì œì•ˆ
                if (classified.hook.length === 0) {
                    suggestions.push("ì‹œê°ì  ì„íŒ©íŠ¸ê°€ ì—†ì–´ìš”! 'ìˆ˜ë§ì€ ~ë´¤ì§€ë§Œ ì´ë ‡ê²Œ ì˜ˆìœê±´ ì²˜ìŒ' ê°™ì€ ì²«ì¸ìƒ ê°•ì¡°ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.");
                }
                
                if (classified.problem.length < 2) {
                    suggestions.push("ë””ìì¸ ë§¤ë ¥ ì„¤ëª…ì´ ë¶€ì¡±í•´ìš”! êµ¬ì²´ì ì¸ ì‹œê°ì  ë¬˜ì‚¬ë¥¼ ë” ì¶”ê°€í•˜ì„¸ìš”.");
                }
                
                if (classified.solution.length === 0) {
                    suggestions.push("ê¸°ëŠ¥ ë³´ë„ˆìŠ¤ ì–´í•„ì´ ì—†ì–´ìš”! 'ì˜ˆì˜ê¸°ë§Œ í•œê²Œ ì•„ë‹ˆë¼ ~ê¹Œì§€' ê°™ì€ ë¶€ê°€ ê°€ì¹˜ë¥¼ ì–¸ê¸‰í•˜ì„¸ìš”.");
                }
                
                if (classified.cta.length === 0) {
                    suggestions.push("í¬ì†Œì„± CTAê°€ ì—†ì–´ìš”! 'ì–´ë µê²Œ ì°¾ì•„ì™”ì–´ìš”' ê°™ì€ íŠ¹ë³„í•¨ì„ ê°•ì¡°í•˜ì„¸ìš”.");
                }
            } else {
                // ê¸°ëŠ¥ ì¤‘ì‹¬ ì œí’ˆ ì œì•ˆ
                if (classified.hook.length === 0) {
                    suggestions.push("í›…ì´ ì—†ì–´ìš”! 'ìš”ì¦˜ í•´ì™¸ì—ì„œ ~ê°€ í•«í•´ìš”' ê°™ì€ ê´€ì‹¬ ë„ëŠ” ë¬¸ì¥ì„ ì¶”ê°€í•˜ì„¸ìš”.");
                }
                
                if (classified.problem.length === 0) {
                    suggestions.push("ë¬¸ì œ ì œê¸°ê°€ ì—†ì–´ìš”! ê¸°ì¡´ ì œí’ˆì˜ ë¶ˆí¸í•¨ì„ ì–¸ê¸‰í•´ë³´ì„¸ìš”.");
                }
                
                if (classified.solution.length < 2) {
                    suggestions.push("ì œí’ˆ ì„¤ëª…ì´ ë¶€ì¡±í•´ìš”! êµ¬ì²´ì  ê¸°ëŠ¥ê³¼ ì¥ì ì„ ë” ì„¤ëª…í•˜ì„¸ìš”.");
                }
                
                if (classified.cta.length === 0) {
                    suggestions.push("CTAê°€ ì—†ì–´ìš”! 'ëŒ“ê¸€ì— ~~ ì ì–´ì£¼ì„¸ìš”' ê°™ì€ í–‰ë™ ìœ ë„ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.");
                }
            }
            
            if (total < 6) {
                suggestions.push("ëŒ€ë³¸ì´ ë„ˆë¬´ ì§§ì•„ìš”. 6-10ë¬¸ì¥ ì •ë„ê°€ ì ë‹¹í•´ìš”.");
            }
            
            if (total > 10) {
                suggestions.push("ëŒ€ë³¸ì´ ë„ˆë¬´ ê¸¸ì–´ìš”. 8-10ë¬¸ì¥ ì •ë„ë¡œ ì¤„ì—¬ë³´ì„¸ìš”.");
            }
            
            if (suggestions.length === 0) {
                suggestions.push("ì™„ë²½í•œ ì†Œì´í™ˆ ìŠ¤íƒ€ì¼ ëŒ€ë³¸ì´ì—ìš”! ğŸ‰");
            }
            
            return suggestions;
        }
    </script>
</body>
</html>
